# NCM ç½‘ç»œé…ç½®ç®¡ç†ç³»ç»Ÿï¼ˆå‰ç«¯ï¼‰

åŸºäº **Vue 3 + Naive UI + Vite + TypeScript** æ„å»ºçš„ç½‘ç»œé…ç½®ç®¡ç†å‰ç«¯ï¼Œæä¾›ç›´è§‚çš„ç½‘ç»œè‡ªåŠ¨åŒ–æ“ä½œç•Œé¢ã€‚

## ğŸŒŸ ç½‘ç»œç®¡ç†ç•Œé¢

### æ ¸å¿ƒåŠŸèƒ½é¡µé¢

| é¡µé¢         | è·¯å¾„             | åŠŸèƒ½                              |
| ------------ | ---------------- | --------------------------------- |
| **è®¾å¤‡ç®¡ç†** | `/ncm/devices`   | ç½‘ç»œè®¾å¤‡ CRUDã€çŠ¶æ€ç›‘æ§ã€å‡­æ®ç®¡ç† |
| **é…ç½®å¤‡ä»½** | `/ncm/backups`   | æ‰‹åŠ¨/æ‰¹é‡å¤‡ä»½ã€ç‰ˆæœ¬å¯¹æ¯”ã€å†…å®¹æŸ¥çœ‹ |
| **é…ç½®ä¸‹å‘** | `/ncm/deploy`    | æ¨¡æ¿éƒ¨ç½²ã€å‘½ä»¤é¢„è§ˆã€æ‰§è¡Œç»“æœå›æ”¾  |
| **èµ„äº§å‘ç°** | `/ncm/discovery` | ç½‘æ®µæ‰«æã€CMDB å¯¹è´¦ã€æ‰«æå†å²     |
| **æ‹“æ‰‘å±•ç¤º** | `/ncm/topology`  | ç‰©ç†æ‹“æ‰‘å¯è§†åŒ–ã€è®¾å¤‡è¯¦æƒ…å¼¹çª—      |
| **å‘Šè­¦ç®¡ç†** | `/ncm/alerts`    | å‘Šè­¦åˆ—è¡¨ã€æ‰¹é‡ç¡®è®¤/å…³é—­ã€ç­›é€‰     |
| **é¢„è®¾ç®¡ç†** | `/ncm/presets`   | å‘½ä»¤æ¨¡æ¿ç®¡ç†ã€å˜é‡å®šä¹‰            |

### ç‰¹è‰²ç»„ä»¶

- **ProTable**ï¼šé€šç”¨è¡¨æ ¼ç»„ä»¶ï¼Œæ”¯æŒè¿œç¨‹åˆ†é¡µã€ç­›é€‰ã€æ’åºã€å³é”®èœå•ã€è™šæ‹Ÿæ»šåŠ¨
- **OtpModal**ï¼šOTP åŠ¨æ€å¯†ç è¾“å…¥å¼¹çª—ï¼Œæ”¯æŒè®¾å¤‡ç»„çº§åˆ«è®¤è¯
- **useTaskPolling**ï¼šå¼‚æ­¥ä»»åŠ¡çŠ¶æ€è½®è¯¢ Composableï¼Œè‡ªåŠ¨æ£€æµ‹è®¤è¯å¤±è´¥
- **vis-network**ï¼šç½‘ç»œæ‹“æ‰‘å¯è§†åŒ–ï¼Œæ”¯æŒäº¤äº’æ“ä½œ

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ•¸ï¸ ç½‘ç»œè‡ªåŠ¨åŒ–

- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒå¤šè®¾å¤‡é€‰æ‹©ã€æ‰¹é‡å¤‡ä»½/ä¸‹å‘/åˆ é™¤
- **å®æ—¶çŠ¶æ€**ï¼šä»»åŠ¡è¿›åº¦è½®è¯¢ã€æˆåŠŸ/å¤±è´¥ç»Ÿè®¡
- **OTP è®¤è¯**ï¼šåŠ¨æ€å¯†ç è¾“å…¥ã€è®¾å¤‡ç»„ç¼“å­˜ã€è®¤è¯å¤±è´¥è‡ªåŠ¨æç¤º
- **å·®å¼‚å¯¹æ¯”**ï¼šé…ç½®ç‰ˆæœ¬ Diff å±•ç¤ºã€è¯­æ³•é«˜äº®
- **æ‹“æ‰‘å¯è§†åŒ–**ï¼švis-network ç‰©ç†æ‹“æ‰‘ã€è®¾å¤‡çŠ¶æ€ç€è‰²

### ğŸ›¡ï¸ æƒé™ç®¡ç†

- **RBAC æƒé™æ§åˆ¶**ï¼šåŸºäºè§’è‰²/èœå•/æŒ‰é’®çš„ç»†ç²’åº¦æƒé™
- **åŠ¨æ€è·¯ç”±**ï¼šæ ¹æ®åç«¯è¿”å›çš„èœå•ç»“æ„åŠ¨æ€ç”Ÿæˆè·¯ç”±
- **éƒ¨é—¨æ•°æ®éš”ç¦»**ï¼šåŸºäºéƒ¨é—¨çš„è®¾å¤‡è®¿é—®æ§åˆ¶

### ğŸ”’ å®‰å…¨å¢å¼º

- **HttpOnly Cookie + CSRF**ï¼šé˜²æ­¢ XSS/CSRF æ”»å‡»
- **Token æ— æ„Ÿåˆ·æ–°**ï¼šAccess Token è¿‡æœŸè‡ªåŠ¨åˆ·æ–°
- **è¯·æ±‚å–æ¶ˆ**ï¼šç›¸åŒè¯·æ±‚è‡ªåŠ¨å–æ¶ˆå‰ä¸€ä¸ªï¼Œé˜²æ­¢ç«æ€

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

- Node.js >= 20
- pnpm

### 2. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 3. ç¯å¢ƒé…ç½®

```bash
cp .env.example .env.development
```

å…³é”®é…ç½®é¡¹ï¼š

```env
# API åŸºç¡€è·¯å¾„
VITE_API_BASE_URL=/api/v1

# å¼€å‘ä»£ç†ç›®æ ‡
VITE_PROXY_TARGET=http://127.0.0.1:8000

# ç«™ç‚¹æ ‡é¢˜
VITE_SITE_TITLE=NCM ç½‘ç»œé…ç½®ç®¡ç†
```

### 4. å¯åŠ¨å¼€å‘

```bash
pnpm dev
```

è®¿é—®åœ°å€ï¼šhttp://127.0.0.1:5173

## ğŸ“‚ ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ api/                  # API æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ devices.ts        # è®¾å¤‡ç®¡ç†
â”‚   â”œâ”€â”€ backups.ts        # é…ç½®å¤‡ä»½
â”‚   â”œâ”€â”€ discovery.ts      # èµ„äº§å‘ç°
â”‚   â”œâ”€â”€ topology.ts       # æ‹“æ‰‘å‘ç°
â”‚   â””â”€â”€ alerts.ts         # å‘Šè­¦ç®¡ç†
â”‚
â”œâ”€â”€ views/ncm/            # ç½‘ç»œç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ devices/          # è®¾å¤‡ç®¡ç†
â”‚   â”œâ”€â”€ backups/          # é…ç½®å¤‡ä»½
â”‚   â”œâ”€â”€ deploy/           # é…ç½®ä¸‹å‘
â”‚   â”œâ”€â”€ discovery/        # èµ„äº§å‘ç°
â”‚   â”œâ”€â”€ topology/         # æ‹“æ‰‘å±•ç¤º
â”‚   â”œâ”€â”€ alerts/           # å‘Šè­¦ç®¡ç†
â”‚   â””â”€â”€ presets/          # é¢„è®¾ç®¡ç†
â”‚
â”œâ”€â”€ components/           # å…¬å…±ç»„ä»¶
â”‚   â””â”€â”€ common/
â”‚       â”œâ”€â”€ ProTable.vue  # é€šç”¨è¡¨æ ¼
â”‚       â””â”€â”€ OtpModal.vue  # OTP å¼¹çª—
â”‚
â”œâ”€â”€ composables/          # ç»„åˆå¼å‡½æ•°
â”‚   â””â”€â”€ useTaskPolling.ts # ä»»åŠ¡è½®è¯¢
â”‚
â”œâ”€â”€ stores/               # Pinia çŠ¶æ€
â”œâ”€â”€ router/               # è·¯ç”±é…ç½®
â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
```

## ğŸ§© å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤              | è¯´æ˜                |
| ----------------- | ------------------- |
| `pnpm dev`        | å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡    |
| `pnpm build`      | æ‰“åŒ…æ„å»ºç”Ÿäº§ç¯å¢ƒ    |
| `pnpm lint`       | ä»£ç æ£€æŸ¥ä¸ä¿®å¤      |
| `pnpm format`     | ä»£ç æ ¼å¼åŒ–          |
| `pnpm type-check` | TypeScript ç±»å‹æ£€æŸ¥ |

## ğŸ“„ License

MIT License
